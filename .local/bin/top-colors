#!/bin/bash

hex2dec() {
	hex="$1"
	printf "%d;%d;%d" 0x${hex:1:2} 0x${hex:3:2} 0x${hex:5:2}
}

img="$1"
colors="$(convert $img -colors $2 -format "%c" histogram:info: | awk '{print $3}')"
nc="\e[0m"

for c in $colors; do
	rgb="$(hex2dec $c)"
	echo -e "\e[48;2;${rgb}m $c $nc $(color-wheel.py $rgb)"
done
